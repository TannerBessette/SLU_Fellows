---
title: "Predicting Rocket League Game Outcome Through Statistical Modeling"
author:
  - name: "By Tanner Bessette"
  - name: "Faculty Advisor: Professor Matthew Higham"
affiliation: 
  - address: "Department of Mathematics, Computer Science & Statistics"
  - address: "St. Lawrence University"
column_numbers: 3
logoright_name: "https://raw.githubusercontent.com/brentthorne/posterdown/master/images/betterhexlogo.png"
logoleft_name: "https://raw.githubusercontent.com/brentthorne/posterdown/master/images/betterhexlogo.png" 
output: 
  posterdown::posterdown_html:
    sections:
      - name: "What is Rocket League?"
        colspan: 1
      - name: "Project Goals"
        colspan: 1
        start: 2
      - name: "Methods"
        colspan: 1
      - name: "What is Random Forest?"
        colspan: 1
      - name: "Decision Tree Example"
        colspan: 1
        start: 2
      - name: "Results"
        colspan: 1
      - name: "Conclusion"
        colspan: 1
    self_contained: false
bibliography: packages.bib
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

# What is Rocket League?

-   One of the most popular video games/esports in the world

-   Soccer played in cars

-   Every player controls a rocket powered car

-   5 minute games

-   Multiple game modes - but only 3v3 mode explored for this project

# Project Goals

-   Train a model on professional Rocket League games and use that model to predict match outcomes (Win/Loss) for other professional Rocket League games

-   Get an idea of which variables are most associated with winning games

-   Potentially use these findings to understand whether certain tactics/strategies used by professional teams are more or less effective

# Dataset and Variables

-   Dataset collected on the main professional Rocket League competition that runs throughout the year; RLCS

-   Spans over the course of multiple professional tournaments throughout the 2021-2022 season\\

-   Variables include information on the teams in the match, team statistics (such as saves, assists, shots, etc.), boost statistics (boost used, boost stolen, time spent without boost, etc.), and movement statistics (time spent moving slow, time spent in each team's half, time spent in air, etc.)

-   Each game in the dataset had two rows: one for the statistics of the blue team and one for the statistics of the orange team

-   I calculated net variables by subtracting all of the blue team's stats from all of the orange team's stats

-   Additionally, I wanted to investigate whether or not different team play styles were consistently associated with winning/losing. To tackle this task, within each game for each team I calculated the standard deviation for all of the variables in the dataset and subsequently calculated the difference in these standard deviations for the blue team minus the orange team.

-   Only variables used in modeling process were the difference variables and the team standard deviation difference variables

# Methods

-   Built a random forest statistical model

    -   Random forest can be classification or regression but for this project I utilized classification (win or loss)

-   Utilized cross validation in the model - a resampling method that creates different splits of training and test data to evaluate model performance

# What is Random Forest?

```{r echo = FALSE, message = FALSE, out.width = "100%"}
library(here)
knitr::include_graphics(here("Images/Random_Forest_Diagram.png"))
## source: https://www.analyticsvidhya.com/blog/2022/07/data-science-interview-series-part-2-random-forest-and-svm/'
```

-   The first step was to perform cross-validation

-   Next, bootstrapping occurs; sampling the set-aside training data with replacement to create many different simulated samples

-   From there, a random subset of variables from the entire dataset (15 variables for each decision tree in my model), are used to create a decision tree that is fit to each of the bootstrapped samples of data

-   Each decision tree runs independently, and makes a classification prediction (predicted win or loss)

-   Then, "voting" happens; whichever result (win or loss) was predicted by the highest number of decision trees becomes the random forest model's final prediction for that game

# Decision Tree Example

```{r morefigs, out.width='80%', echo=FALSE, message = FALSE, fig.cap='Amazing, right?!', fig.height=5}
library(tidyverse)
library(tidymodels)
library(tree)
library(ggplot2)
library(rpart)
library(rpart.plot)
library(knitr)
library(here)
library(vip)
library(caret)
RL_joined <- read_csv(here("RL_Datasets/RL_joined.csv"))
RL_numeric <- read_csv(here("RL_Datasets/RL_numeric.csv"), 
        col_types = cols(winner_factor = readr::col_factor()))

RL_numeric_tree_example <- RL_numeric |> 
                  select(c("winner_factor", 
                           "movement_time_high_air_diff",
                           "boost_time_zero_boost_diff",
                           "movement_time_slow_speed_diff",
                           "positioning_time_defensive_third_diff",
                           "positioning_time_offensive_half_diff"))
clean_tree <- rpart(winner_factor ~ ., 
                    data = RL_numeric_tree_example)
rpart.plot(clean_tree)
```

# Results

-   Final random forest model predicted Rocket League game outcome with **86.35% accuracy**

-   Two clear strongest predictor variables: difference in positioning time behind the ball and difference in shots

-   None of the standard deviation differences proved to be significant predictors

# Conclusion

-   Based on the two most significant indicators of winning being spending more time behind the ball than your opponent and recording more shots than your opponent, it reinforces the idea that you should be keeping constant pressure on your opponent as the most effective Rocket League strategy

-   Coaches constantly discuss the importance of keeping speed/momentum high throughout games, but, interestingly, related to car speed proved to have little to no effect on predicting game outcome

-   Standard deviation difference predictors also proved to not be valuable in predicting game outcome, which means through this model alone we cannot determine whether certain team tactics are more associated with winning games

    -   The lack of any association could be because at the highest level of Rocket League, there may not be significant differences in tactical approaches among teams, and players may already have all of their roles set within each team

    -   Also possible that with further exploration into different team strategies, certain strategic approaches may prove to be more effective
